import 'package:flutter/material.dart';
import 'theme/app_theme.dart';
import 'screens/splash_screen.dart';

void main() {
  runApp(const UtsApp());
}

class UtsApp extends StatelessWidget {
  const UtsApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      title: 'UTS Mobile - Luxury App',
      theme: AppTheme.getLightTheme(),
      home: const SplashScreen(),
    );
  }
}

  @override
  State<SplashScreen> createState() => _SplashScreenState();
}

class _SplashScreenState extends State<SplashScreen>
    with SingleTickerProviderStateMixin {
  late final AnimationController _controller = AnimationController(
    vsync: this,
    duration: const Duration(seconds: 2),
  )..repeat(reverse: true);

  @override
  void initState() {
    super.initState();
    // Pindah otomatis ke Dashboard setelah 5 detik (sesuai UTS)
    Timer(const Duration(seconds: 5), () {
      if (mounted) {
        Navigator.of(context).pushReplacement(_fade(const MainShell()));
      }
    });
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }

  Route _fade(Widget page) => PageRouteBuilder(
    pageBuilder: (_, __, ___) => page,
    transitionsBuilder: (_, animation, __, child) {
      return FadeTransition(opacity: animation, child: child);
    },
  );

  @override
  Widget build(BuildContext context) {
    final t = Theme.of(context).textTheme;

    return Scaffold(
      body: Stack(
        fit: StackFit.expand,
        children: [
          // Background gradient + noise
          Container(
            decoration: const BoxDecoration(
              gradient: LinearGradient(
                colors: [Color(0xFF0E1218), Color(0xFF121722)],
                begin: Alignment.topLeft,
                end: Alignment.bottomRight,
              ),
            ),
          ),
          // Accent gold shimmer blob
          Align(
            alignment: const Alignment(0.9, -0.8),
            child: AnimatedBuilder(
              animation: _controller,
              builder: (_, __) {
                final v = (sin(_controller.value * 2 * pi) + 1) / 2;
                return Container(
                  width: 220 + 30 * v,
                  height: 220 + 30 * v,
                  decoration: BoxDecoration(
                    shape: BoxShape.circle,
                    gradient: RadialGradient(
                      colors: [
                        AppColors.gold.withOpacity(0.25),
                        Colors.transparent,
                      ],
                    ),
                  ),
                );
              },
            ),
          ),
          // Content
          SafeArea(
            child: Center(
              child: Column(
                mainAxisSize: MainAxisSize.min,
                children: [
                  // Foto kamu (ganti ke AssetImage jika pakai aset sendiri)
                  CircleAvatar(
                    radius: 54,
                    backgroundColor: AppColors.gold.withOpacity(0.2),
                    backgroundImage: const AssetImage(
                      'assets/profile.jpg',
                    ), // siapkan file ini opsional
                    child: const SizedBox.shrink(),
                  ),
                  const SizedBox(height: 18),
                  Text('Welcome to my project', style: t.headlineLarge),
                  const SizedBox(height: 8),
                  Text(
                    'Nama: Abdy Ananda Yunan',
                    style: t.bodyLarge!.copyWith(color: AppColors.gold),
                  ),
                  const SizedBox(height: 4),
                  Text('NIM: 152022100', style: t.bodyMedium),
                  const SizedBox(height: 22),
                  _GoldPill(text: 'Pemrograman Mobile — UTS'),
                ],
              ),
            ),
          ),
        ],
      ),
    );
  }
}

class _GoldPill extends StatelessWidget {
  final String text;
  const _GoldPill({required this.text});

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.symmetric(horizontal: 18, vertical: 10),
      decoration: BoxDecoration(
        borderRadius: BorderRadius.circular(100),
        gradient: const LinearGradient(
          colors: [AppColors.gold, AppColors.goldSoft],
        ),
      ),
      child: Text(
        text,
        style: const TextStyle(
          color: Colors.black,
          fontWeight: FontWeight.w800,
          letterSpacing: 0.2,
        ),
      ),
    );
  }
}

/// ======================================
/// 2) MAIN SHELL dgn BottomNavigationBar
///    Tab: Biodata, Kontak, Kalkulator, Cuaca, Berita
/// ======================================
class MainShell extends StatefulWidget {
  const MainShell({super.key});

  @override
  State<MainShell> createState() => _MainShellState();
}

class _MainShellState extends State<MainShell> {
  int _index = 0;

  final _pages = const [
    BiodataPage(),
    KontakPage(),
    KalkulatorPage(),
    CuacaPage(),
    BeritaPage(),
  ];

  @override
  Widget build(BuildContext context) {
    final t = Theme.of(context).textTheme;
    return Scaffold(
      appBar: AppBar(
        backgroundColor: AppColors.bg,
        elevation: 0,
        title: Row(
          children: [
            const Icon(Icons.workspace_premium, color: AppColors.gold),
            const SizedBox(width: 10),
            Text('Homepage', style: t.titleLarge),
          ],
        ),
      ),
      body: AnimatedSwitcher(
        duration: const Duration(milliseconds: 250),
        child: _pages[_index],
      ),
      bottomNavigationBar: NavigationBar(
        height: 70,
        selectedIndex: _index,
        onDestinationSelected: (i) => setState(() => _index = i),
        indicatorColor: AppColors.gold.withOpacity(0.2),
        destinations: const [
          NavigationDestination(
            icon: Icon(Icons.badge_outlined),
            label: 'Biodata',
          ),
          NavigationDestination(
            icon: Icon(Icons.contacts_outlined),
            label: 'Kontak',
          ),
          NavigationDestination(
            icon: Icon(Icons.calculate_outlined),
            label: 'Kalkulator',
          ),
          NavigationDestination(
            icon: Icon(Icons.cloud_outlined),
            label: 'Cuaca',
          ),
          NavigationDestination(
            icon: Icon(Icons.article_outlined),
            label: 'Berita',
          ),
        ],
      ),
    );
  }
}

/// =======================
/// 3) BIODATA — Form statis
/// =======================
class BiodataPage extends StatefulWidget {
  const BiodataPage({super.key});

  @override
  State<BiodataPage> createState() => _BiodataPageState();
}

class _BiodataPageState extends State<BiodataPage> {
  final _formKey = GlobalKey<FormState>();
  final _namaCtrl = TextEditingController();
  final _nimCtrl = TextEditingController();
  final _hobiCtrl = TextEditingController();
  String? _gender = 'Laki-laki';
  String? _prodi = 'Informatika';
  DateTime? _tanggal;

  @override
  void dispose() {
    _namaCtrl.dispose();
    _nimCtrl.dispose();
    _hobiCtrl.dispose();
    super.dispose();
  }

  Future<void> _pickDate() async {
    final now = DateTime.now();
    final res = await showDatePicker(
      context: context,
      firstDate: DateTime(1990),
      lastDate: DateTime(now.year + 1),
      initialDate: _tanggal ?? DateTime(now.year - 20),
    );
    if (res != null) setState(() => _tanggal = res);
  }

  void _submit() {
    if (!_formKey.currentState!.validate()) return;
    final snack = SnackBar(
      behavior: SnackBarBehavior.floating,
      backgroundColor: AppColors.card,
      content: Text(
        'Tersimpan (statis): '
        'Nama=${_namaCtrl.text}, NIM=${_nimCtrl.text}, Prodi=$_prodi, '
        'Gender=$_gender, Tgl=${_tanggal?.toIso8601String().split("T").first}, '
        'Hobi=${_hobiCtrl.text}',
        style: const TextStyle(color: Colors.white),
      ),
    );
    ScaffoldMessenger.of(context).showSnackBar(snack);
  }

  @override
  Widget build(BuildContext context) {
    final t = Theme.of(context).textTheme;
    return SingleChildScrollView(
      padding: const EdgeInsets.all(16),
      child: Column(
        children: [
          _SectionHeader(
            title: 'Biodata',
            subtitle:
                'Isi data diri (statis, tidak disimpan ke database) — desain clean & premium.',
          ),
          const SizedBox(height: 12),
          Card(
            child: Padding(
              padding: const EdgeInsets.all(16),
              child: Form(
                key: _formKey,
                child: Column(
                  children: [
                    // Foto profil (placeholder)
                    Row(
                      children: [
                        const CircleAvatar(
                          radius: 36,
                          backgroundColor: Color(0xFF232B3B),
                          child: Icon(
                            Icons.person,
                            size: 38,
                            color: AppColors.gold,
                          ),
                        ),
                        const SizedBox(width: 16),
                        Expanded(
                          child: Text(
                            'Unggah foto di About GitHub',
                            style: t.bodyMedium,
                          ),
                        ),
                      ],
                    ),
                    const SizedBox(height: 16),
                    TextFormField(
                      controller: _namaCtrl,
                      decoration: const InputDecoration(
                        labelText: 'Nama Lengkap',
                      ),
                      validator: (v) =>
                          (v == null || v.isEmpty) ? 'Wajib diisi' : null,
                    ),
                    const SizedBox(height: 12),
                    TextFormField(
                      controller: _nimCtrl,
                      decoration: const InputDecoration(labelText: 'NIM'),
                      validator: (v) =>
                          (v == null || v.isEmpty) ? 'Wajib diisi' : null,
                    ),
                    const SizedBox(height: 12),
                    DropdownButtonFormField<String>(
                      value: _prodi,
                      decoration: const InputDecoration(
                        labelText: 'Program Studi',
                      ),
                      items: const [
                        DropdownMenuItem(
                          value: 'Informatika',
                          child: Text('Informatika'),
                        ),
                        DropdownMenuItem(
                          value: 'Sistem Informasi',
                          child: Text('Sistem Informasi'),
                        ),
                        DropdownMenuItem(
                          value: 'Teknik Elektro',
                          child: Text('Teknik Elektro'),
                        ),
                      ],
                      onChanged: (v) => setState(() => _prodi = v),
                    ),
                    const SizedBox(height: 12),
                    Align(
                      alignment: Alignment.centerLeft,
                      child: Text('Jenis Kelamin', style: t.titleLarge),
                    ),
                    RadioListTile<String>(
                      contentPadding: EdgeInsets.zero,
                      value: 'Laki-laki',
                      groupValue: _gender,
                      onChanged: (v) => setState(() => _gender = v),
                      title: const Text('Laki-laki'),
                    ),
                    RadioListTile<String>(
                      contentPadding: EdgeInsets.zero,
                      value: 'Perempuan',
                      groupValue: _gender,
                      onChanged: (v) => setState(() => _gender = v),
                      title: const Text('Perempuan'),
                    ),
                    const SizedBox(height: 12),
                    TextFormField(
                      controller: _hobiCtrl,
                      decoration: const InputDecoration(
                        labelText: 'Hobi / Minat',
                        hintText: 'Contoh: membaca, fotografi',
                      ),
                    ),
                    const SizedBox(height: 12),
                    Row(
                      children: [
                        Expanded(
                          child: OutlinedButton.icon(
                            onPressed: _pickDate,
                            icon: const Icon(Icons.calendar_month),
                            label: Text(
                              _tanggal == null
                                  ? 'Pilih Tanggal Lahir'
                                  : 'Tanggal: ${_tanggal!.toIso8601String().split("T").first}',
                            ),
                            style: OutlinedButton.styleFrom(
                              foregroundColor: AppColors.gold,
                              side: const BorderSide(color: AppColors.gold),
                            ),
                          ),
                        ),
                      ],
                    ),
                    const SizedBox(height: 18),
                    SizedBox(
                      width: double.infinity,
                      child: ElevatedButton(
                        onPressed: _submit,
                        style: ElevatedButton.styleFrom(
                          backgroundColor: AppColors.gold,
                          foregroundColor: Colors.black,
                          padding: const EdgeInsets.symmetric(vertical: 14),
                          shape: RoundedRectangleBorder(
                            borderRadius: BorderRadius.circular(16),
                          ),
                        ),
                        child: const Text('Simpan (Statis)'),
                      ),
                    ),
                  ],
                ),
              ),
            ),
          ),
        ],
      ),
    );
  }
}

/// =======================
/// 4) KONTAK — daftar statis
/// =======================
class KontakPage extends StatelessWidget {
  const KontakPage({super.key});

  List<_Contact> _generate() {
    const names = [
      'Aisyah',
      'Budi',
      'Citra',
      'Dimas',
      'Eka',
      'Fajar',
      'Galih',
      'Hani',
      'Indra',
      'Joko',
      'Kiki',
      'Lia',
      'Mira',
      'Nanda',
      'Omar',
    ]; // >= 15
    return List.generate(
      names.length,
      (i) => _Contact(
        name: names[i],
        phone: '08${(Random(i).nextInt(900000000) + 100000000)}',
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    final contacts = _generate();
    return ListView.separated(
      padding: const EdgeInsets.all(16),
      itemCount: contacts.length + 1,
      separatorBuilder: (_, __) => const SizedBox(height: 10),
      itemBuilder: (ctx, i) {
        if (i == 0) {
          return const _SectionHeader(
            title: 'Kontak',
            subtitle: 'Daftar telepon (statis) dengan avatar melingkar.',
          );
        }
        final c = contacts[i - 1];
        final color = Colors.primaries[(i * 3) % Colors.primaries.length];
        return Card(
          child: ListTile(
            leading: CircleAvatar(
              backgroundColor: color.shade400,
              child: Text(c.name.characters.first.toUpperCase()),
            ),
            title: Text(c.name),
            subtitle: Text(c.phone),
            trailing: const Icon(Icons.chevron_right),
            onTap: () {
              showModalBottomSheet(
                context: context,
                backgroundColor: AppColors.card,
                shape: const RoundedRectangleBorder(
                  borderRadius: BorderRadius.vertical(top: Radius.circular(24)),
                ),
                builder: (context) => Padding(
                  padding: const EdgeInsets.all(20),
                  child: Column(
                    mainAxisSize: MainAxisSize.min,
                    children: [
                      // Header with avatar
                      Row(
                        children: [
                          CircleAvatar(
                            radius: 32,
                            backgroundColor: color.shade400,
                            child: Text(
                              c.name.characters.first.toUpperCase(),
                              style: const TextStyle(
                                fontSize: 24,
                                fontWeight: FontWeight.bold,
                              ),
                            ),
                          ),
                          const SizedBox(width: 16),
                          Expanded(
                            child: Column(
                              crossAxisAlignment: CrossAxisAlignment.start,
                              children: [
                                Text(
                                  c.name,
                                  style: Theme.of(context).textTheme.titleLarge,
                                ),
                                Text(
                                  c.occupation,
                                  style: const TextStyle(
                                    color: AppColors.goldSoft,
                                  ),
                                ),
                              ],
                            ),
                          ),
                        ],
                      ),
                      const SizedBox(height: 24),
                      // Contact details
                      _ContactDetailTile(
                        icon: Icons.phone,
                        label: 'Telepon',
                        value: c.phone,
                      ),
                      const Divider(height: 1, color: Color(0xFF2A303C)),
                      _ContactDetailTile(
                        icon: Icons.email,
                        label: 'Email',
                        value: c.email,
                      ),
                      const Divider(height: 1, color: Color(0xFF2A303C)),
                      _ContactDetailTile(
                        icon: Icons.location_on,
                        label: 'Alamat',
                        value: c.address,
                      ),
                      const SizedBox(height: 20),
                      // Action button
                      SizedBox(
                        width: double.infinity,
                        child: ElevatedButton(
                          style: ElevatedButton.styleFrom(
                            backgroundColor: AppColors.gold,
                            foregroundColor: Colors.black,
                            padding: const EdgeInsets.symmetric(vertical: 14),
                            shape: RoundedRectangleBorder(
                              borderRadius: BorderRadius.circular(16),
                            ),
                          ),
                          onPressed: () => Navigator.of(context).pop(),
                          child: const Text('Tutup'),
                        ),
                      ),
                    ],
                  ),
                ),
              );
            },
          ),
        );
      },
    );
  }
}

class _ContactDetailTile extends StatelessWidget {
  final IconData icon;
  final String label;
  final String value;

  const _ContactDetailTile({
    required this.icon,
    required this.label,
    required this.value,
  });

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(vertical: 12),
      child: Row(
        children: [
          Icon(icon, color: AppColors.gold),
          const SizedBox(width: 12),
          Expanded(
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(
                  label,
                  style: const TextStyle(color: AppColors.textSecondary),
                ),
                const SizedBox(height: 2),
                Text(
                  value,
                  style: const TextStyle(color: AppColors.textPrimary),
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}

class _Contact {
  final String name;
  final String phone;
  final String email;
  final String address;
  final String occupation;
  _Contact({
    required this.name,
    required this.phone,
    String? email,
    String? address,
    String? occupation,
  }) : email = email ?? '${name.toLowerCase().replaceAll(' ', '.')}@email.com',
       address =
           address ?? 'Jl. Contoh No. ${Random().nextInt(100) + 1}, Bandung',
       occupation =
           occupation ??
           ['Mahasiswa', 'Dosen', 'Karyawan', 'Wiraswasta'][Random().nextInt(
             4,
           )];
}

/// ===========================
/// 5) KALKULATOR — sederhana
/// ===========================
class KalkulatorPage extends StatefulWidget {
  const KalkulatorPage({super.key});

  @override
  State<KalkulatorPage> createState() => _KalkulatorPageState();
}

class _KalkulatorPageState extends State<KalkulatorPage> {
  String _display = '0';
  double? _acc;
  String? _op; // + - × ÷
  bool _resetOnNext = false;

  void _input(String v) {
    setState(() {
      if (_resetOnNext) {
        _display = (v == '.') ? '0.' : v;
        _resetOnNext = false;
        return;
      }
      if (v == '.') {
        if (_display.contains('.')) return;
        _display += '.';
      } else {
        _display = (_display == '0') ? v : _display + v;
      }
    });
  }

  void _operate(String op) {
    setState(() {
      _acc = double.tryParse(_display) ?? 0.0;
      _op = op;
      _resetOnNext = true;
    });
  }

  void _equals() {
    setState(() {
      final b = double.tryParse(_display) ?? 0.0;
      final a = _acc ?? 0.0;
      double res = b;
      switch (_op) {
        case '+':
          res = a + b;
          break;
        case '-':
          res = a - b;
          break;
        case '×':
          res = a * b;
          break;
        case '÷':
          res = b == 0 ? double.nan : a / b;
          break;
      }
      _display = _fmt(res);
      _acc = null;
      _op = null;
      _resetOnNext = true;
    });
  }

  void _square() {
    setState(() {
      final x = double.tryParse(_display) ?? 0.0;
      _display = _fmt(x * x);
      _resetOnNext = true;
    });
  }

  void _sqrt() {
    setState(() {
      final x = double.tryParse(_display) ?? 0.0;
      _display = x < 0 ? 'NaN' : _fmt(sqrt(x));
      _resetOnNext = true;
    });
  }

  void _clear() {
    setState(() {
      _display = '0';
      _acc = null;
      _op = null;
      _resetOnNext = false;
    });
  }

  void _backspace() {
    setState(() {
      if (_resetOnNext) {
        _display = '0';
        _resetOnNext = false;
      } else {
        _display = _display.length <= 1
            ? '0'
            : _display.substring(0, _display.length - 1);
      }
    });
  }

  String _fmt(double v) {
    if (v.isNaN || v.isInfinite) return v.toString();
    final s = v.toStringAsFixed(12);
    return RegExp(r'\.?0+$').hasMatch(s)
        ? s.replaceAll(RegExp(r'\.?0+$'), '')
        : s;
  }

  Widget _btn(String label, {Color? bg, VoidCallback? onTap}) {
    return ElevatedButton(
      onPressed: onTap,
      style: ElevatedButton.styleFrom(
        backgroundColor: bg ?? AppColors.card,
        foregroundColor: Colors.white,
        elevation: 3,
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16)),
        padding: const EdgeInsets.symmetric(vertical: 16),
      ),
      child: Text(
        label,
        style: const TextStyle(fontSize: 20, fontWeight: FontWeight.w700),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    final t = Theme.of(context).textTheme;
    final gridPad = const EdgeInsets.all(8);
    return SingleChildScrollView(
      padding: const EdgeInsets.all(16),
      child: Column(
        children: [
          const _SectionHeader(
            title: 'Kalkulator',
            subtitle:
                'Operasi: +, -, ×, ÷, x², √x, hapus satu digit, dan clear — sesuai ketentuan UTS.',
          ),
          const SizedBox(height: 12),
          Card(
            child: Padding(
              padding: const EdgeInsets.all(18),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.end,
                children: [
                  Text(
                    _display,
                    key: const ValueKey('display'),
                    style: t.headlineLarge!.copyWith(color: AppColors.gold),
                  ),
                ],
              ),
            ),
          ),
          const SizedBox(height: 12),
          GridView.count(
            physics: const NeverScrollableScrollPhysics(),
            shrinkWrap: true,
            crossAxisCount: 4,
            mainAxisSpacing: 10,
            crossAxisSpacing: 10,
            children: [
              _btn('7', onTap: () => _input('7')),
              _btn('8', onTap: () => _input('8')),
              _btn('9', onTap: () => _input('9')),
              _btn('÷', bg: AppColors.gold, onTap: () => _operate('÷')),
              _btn('4', onTap: () => _input('4')),
              _btn('5', onTap: () => _input('5')),
              _btn('6', onTap: () => _input('6')),
              _btn('×', bg: AppColors.gold, onTap: () => _operate('×')),
              _btn('1', onTap: () => _input('1')),
              _btn('2', onTap: () => _input('2')),
              _btn('3', onTap: () => _input('3')),
              _btn('-', bg: AppColors.gold, onTap: () => _operate('-')),
              _btn('.', onTap: () => _input('.')),
              _btn('0', onTap: () => _input('0')),
              _btn('⌫', onTap: _backspace),
              _btn('+', bg: AppColors.gold, onTap: () => _operate('+')),
              _btn('x²', onTap: _square),
              _btn('√x', onTap: _sqrt),
              _btn('C', onTap: _clear),
              _btn('=', bg: AppColors.gold, onTap: _equals),
            ],
          ),
          Padding(padding: gridPad),
        ],
      ),
    );
  }
}

/// ======================
/// 6) CUACA — data statis
/// ======================
class CuacaPage extends StatefulWidget {
  const CuacaPage({super.key});

  @override
  State<CuacaPage> createState() => _CuacaPageState();
}

class _CuacaPageState extends State<CuacaPage>
    with SingleTickerProviderStateMixin {
  late final AnimationController _c = AnimationController(
    vsync: this,
    duration: const Duration(seconds: 3),
  )..repeat();

  @override
  void dispose() {
    _c.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final t = Theme.of(context).textTheme;

    // Data statis (bisa kamu ubah sesuka hati)
    const city = 'Bandung, ID';
    const temp = 24; // °C
    const humidity = 72; // %
    const condition = 'Berawan • Angin 2.1 m/s';

    return SingleChildScrollView(
      padding: const EdgeInsets.all(16),
      child: Column(
        children: [
          const _SectionHeader(
            title: 'Cuaca',
            subtitle: 'Detail suhu, kelembapan, kondisi udara di lokasi anda.',
          ),
          const SizedBox(height: 12),
          Card(
            child: Container(
              padding: const EdgeInsets.all(20),
              decoration: BoxDecoration(
                gradient: LinearGradient(
                  colors: [const Color(0xFF1D2433), AppColors.card],
                  begin: Alignment.topLeft,
                  end: Alignment.bottomRight,
                ),
                borderRadius: BorderRadius.circular(24),
              ),
              child: Row(
                children: [
                  // Ikon matahari berputar halus (micro-animation)
                  AnimatedBuilder(
                    animation: _c,
                    builder: (_, __) {
                      return Transform.rotate(
                        angle: _c.value * 2 * pi,
                        child: const Icon(
                          Icons.wb_sunny_rounded,
                          size: 64,
                          color: AppColors.gold,
                        ),
                      );
                    },
                  ),
                  const SizedBox(width: 18),
                  Expanded(
                    child: Column(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        Text(city, style: t.titleLarge),
                        const SizedBox(height: 6),
                        Text(
                          '$temp°C',
                          style: t.headlineMedium!.copyWith(
                            color: AppColors.gold,
                          ),
                        ),
                        const SizedBox(height: 6),
                        Text('Kelembapan: $humidity%', style: t.bodyLarge),
                        Text(condition, style: t.bodyMedium),
                      ],
                    ),
                  ),
                ],
              ),
            ),
          ),
        ],
      ),
    );
  }
}

/// ======================
/// 7) BERITA — list statis
/// ======================
class BeritaPage extends StatelessWidget {
  const BeritaPage({super.key});

  List<_News> _fakeNews() => [
    _News(
      title: 'Kampus Luncurkan Program Inovasi Mobile',
      teaser:
          'Mahasiswa menampilkan aplikasi dengan UI/UX modern dan performa cepat.',
      time: '2 jam lalu',
    ),
    _News(
      title: 'Tips Lulus UTS Pemrograman Mobile',
      teaser: 'Fokus pada fungsional minimum + desain yang rapi & konsisten.',
      time: '5 jam lalu',
    ),
    _News(
      title: 'Tren Dark Mode: Elegan & Hemat Daya',
      teaser:
          'Dark mode memberi nuansa premium, bila dipadukan aksen warna kontras.',
      time: 'Kemarin',
    ),
  ];

  @override
  Widget build(BuildContext context) {
    final list = _fakeNews();
    return ListView.separated(
      padding: const EdgeInsets.all(16),
      itemCount: list.length + 1,
      separatorBuilder: (_, __) => const SizedBox(height: 12),
      itemBuilder: (ctx, i) {
        if (i == 0) {
          return const _SectionHeader(
            title: 'Berita',
            subtitle:
                'Pola tampilan berulang (card list) — konten statis seperti contoh pada soal.',
          );
        }
        final n = list[i - 1];
        final color = Colors.primaries[(i * 5) % Colors.primaries.length];
        return Card(
          child: ListTile(
            contentPadding: const EdgeInsets.all(16),
            leading: CircleAvatar(
              radius: 26,
              backgroundColor: color.shade400,
              child: const Icon(Icons.article, color: Colors.white),
            ),
            title: Text(n.title, maxLines: 2, overflow: TextOverflow.ellipsis),
            subtitle: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                const SizedBox(height: 6),
                Text(n.teaser, maxLines: 2, overflow: TextOverflow.ellipsis),
                const SizedBox(height: 8),
                Row(
                  children: [
                    const Icon(
                      Icons.schedule,
                      size: 16,
                      color: AppColors.textSecondary,
                    ),
                    const SizedBox(width: 6),
                    Text(
                      n.time,
                      style: const TextStyle(color: AppColors.textSecondary),
                    ),
                  ],
                ),
              ],
            ),
            onTap: () {},
          ),
        );
      },
    );
  }
}

class _News {
  final String title;
  final String teaser;
  final String time;
  _News({required this.title, required this.teaser, required this.time});
}

/// =====================
/// Komponen util
/// =====================
class _SectionHeader extends StatelessWidget {
  final String title;
  final String subtitle;
  const _SectionHeader({required this.title, required this.subtitle});

  @override
  Widget build(BuildContext context) {
    final t = Theme.of(context).textTheme;
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(title, style: t.headlineMedium),
        const SizedBox(height: 6),
        Text(subtitle, style: t.bodyMedium),
      ],
    );
  }
}
